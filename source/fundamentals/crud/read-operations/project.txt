==============================
Specify Which Fields to Return
==============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

In this guide, you can learn how to specify which fields to return in a
document from read operations.

Sample Data
~~~~~~~~~~~

To run the examples in this guide, load these documents into the
``ratings`` collection of the ``tea`` database with the following
snippet:

.. literalinclude:: /includes/fundamentals/code-snippets/CRUD/projection.go 
   :language: go
   :dedent:
   :start-after: begin insertDocs
   :end-before: end insertDocs

.. include:: /includes/fundamentals/tea-sample-data-ending.rst

Projection
----------

A projection specifies which fields to return in a document. To create a
projection, pass an interface specifying the field and whether to
indclude that field to the ``SetProjection()`` function of a read
operation's options. To include the field, specify a ``1`` and to
exclude a field, specify a ``0``. 

Specify the options as the last parameter to the following read
operation functions:

- ``Find()``
- ``FindOne()``
- ``FindOneAndDelete()``
- ``FindOneAndReplace()``
- ``FindOneAndUpdate()``

Exception
~~~~~~~~~

When specifying a projection, you can only specify to either include or
exclude fields. This rule **does not** apply to the ``_id`` field. You
can exclude the ``_id`` field even if you specified to include certain
fields.

By default, the driver includes the ``_id`` field. You must explicitly
exclude the ``_id`` field if you do not want it returned. For an example
of this scenario, see the :ref:`include a field section <go-include-projection>`.

.. tip::

   If you don't specify a projection, the read operation returns all
   the fields in matched documents.

Exclude a Field
~~~~~~~~~~~~~~~

Specify a ``0`` in the interface passed to the ``SetProjection()``
function to exclude a field. For all fields you don't explicitly list
in the interface, the driver includes them.

Example
```````

The following example excludes the ``rating`` from the matched documents
from the ``Find()`` function:

.. literalinclude:: /includes/fundamentals/code-snippets/CRUD/projection.go
   :language: go
   :dedent:
   :start-after: begin exclude projection
   :end-before: end exclude projection

After running this example, the output resembles the following:

.. code-block:: none
   :copyable: false

   //results truncated
   [{_id ObjectID("...")} {type Masala}]
   [{_id ObjectID("...")} {type Assam}]
   [{_id ObjectID("...")} {type Oolong}]
   [{_id ObjectID("...")} {type Earl Grey}]
   [{_id ObjectID("...")} {type English Breakfast}]

Include a Field
~~~~~~~~~~~~~~~

Specify a ``1`` in the interface passed to the ``SetProjection()``
function to include a field. For all fields you don't explicitly list
in the interface, the driver excludes them.

.. important::

    You can exclude the ``_id`` field even if you specified to include
    certain fields.

.. _go-include-projection:

Example
```````

The following example performs the following projection on the matched
documents from the ``Find()`` function:

- Include the ``type`` and ``rating`` field
- Exclude the ``_id`` field

.. literalinclude:: /includes/fundamentals/code-snippets/CRUD/projection.go
   :language: go
   :dedent:
   :start-after: begin include projection
   :end-before: end include projection

After running this example, the output resembles the following:

.. code-block:: none
   :copyable: false

   [{type Masala} {rating 10}]
   [{type Assam} {rating 5}]
   [{type Oolong} {rating 7}]
   [{type Earl Grey} {rating 8}]
   [{type English Breakfast} {rating 5}]

.. tip:: Using Aggregation 

   You can also include the :manual:`$project </reference/operator/aggregation/project/>`
   stage to specify a projection in an aggregation pipeline.

   This example specifies the same projection from the preceding example
   in an aggregation pipeline:

   .. literalinclude:: /includes/fundamentals/code-snippets/CRUD/projection.go
      :language: go
      :dedent:
      :start-after: begin aggregate projection
      :end-before: end aggregate projection

Additional Information
----------------------

For more information on performing read operations, see our guide on
:doc:`retrieving data </fundamentals/crud/read-operations/retrieve>`.

API Documentation
~~~~~~~~~~~~~~~~~

For more information on any of the functions or types discussed in this
guide, see the following API Documentation:

- `Find() <{+api+}/mongo#Collection.Find>`__
- `FindOptions.SetProjection() <{+api+}/mongo/options#FindOptions.SetProjection>`__
- `FindOne() <{+api+}/mongo#Collection.FindOne>`__
- `FindOneAndDelete() <{+api+}/mongo#Collection.FindOneAndDelete>`__
- `FindOneAndReplace() <{+api+}/mongo#Collection.FindOneAndReplace>`__
- `FindOneAndUpdate() <{+api+}/mongo#Collection.FindOneAndUpdate>`__
- `Aggregate() <{+api+}/mongo#Collection.Aggregate>`__
